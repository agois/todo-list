<!DOCTYPE html>
<html>
    <head>
        <title>Alex Gois' ToDo Project</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--         <link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.min.css">
        <script src="./spark-md5.js" type="text/javascript"></script>
 -->
        <style type="text/css" media="screen">
            .todo{
                margin:17px 20px 20px 20px;
                border-radius:2px;
                background:#eeaaaa;
            }
            textarea {  
               font-family: monospace;  
               font-size: 18px;   
            }
        </style>
    </head>
    <body class="container">
        <h1>TODO List</h1>

        <h4>Please enter your TODO items using the text field below.</br>Then click the "SUBMIT" button.</h4>
        <p>
            <br/>The items will be put in your TODO list below:</br>
        </p>
        <div id="todo-list" class="todo"></div>

        <div class="input">
            <!-- Taken from http://stackoverflow.com/questions/155188/trigger-a-button-click-with-javascript-on-the-enter-key-in-a-text-box -->
            <textarea id="input" cols="80" rows="1" wrap="soft" onkeypress="onTestChange(event);"></textarea>
        </div>

        <div class="actions">
            <input type="button" id="submit" value="SUBMIT" class="btn"/>
            <input type="button" id="clear" value="CLEAR" class="btn"/>
        </div>

        <div class="actions">
            </br></br></br>
            <p>Save to local machine using buttons below.</p>
            <input type="file" id="file" class="input-file span5"/>
            <input type="button" id="save" value="SAVE" class="btn primary"/>
        </div>

        <script type="text/javascript">

            var blobSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice,
                todoList = document.getElementById("todo-list"),
                input = document.getElementById("file"),
                running = false;

            function onTestChange(key) {
                key = key || window.event;

                // If the user has pressed enter
                if (key.keyCode == 13) {
                    submitItem();
                    return false;
                } else {
                    return true;
                }
            }

            function strikethru() {

            }

            function registerItem(str, className) {
                var elem = document.createElement("div");
                elem.innerHTML = "<li> " + str;
                elem.className = "alert-message" + (className ? " "  + className : "");
                elem.addEventListener("click", function( event ) {
                  // display the current click count inside the clicked div
                  event.target.innerHTML = "<del>" + event.target.innerHTML + "</del>";
                }, false);
                todoList.appendChild(elem);
            }

            function clearTodoList() {
                document.getElementById('todo-list').value = '';
                while (todoList.firstChild){
                    todoList.removeChild(todoList.firstChild);
                }
            }

            function saveToFile() {
                alert("saved");
            }

            function copyToClipboard(text) {
                window.prompt("Copy to clipboard: Ctrl+C, Enter", text);
            }

            function submitItem() {
                var item = document.getElementById('input').value;  // Obtain the value of the input field
                document.getElementById('input').value = '';        // Clear the input field
                registerItem(item);                                 // Register input in the TODO list
            }

            document.getElementById("save").addEventListener("click", saveToFile);
            document.getElementById("submit").addEventListener("click", submitItem);
            document.getElementById("clear").addEventListener("click", clearTodoList);
        </script>


    </body>
</html>